"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Audit = void 0;
const server_client_1 = require("@vonage/server-client");
class Audit extends server_client_1.Client {
    BASE_PATH = 'beta';
    authType = server_client_1.AuthenticationType.BASIC;
    async *getEvents(params) {
        let totalPages = 0;
        let page = params?.page || 1;
        do {
            params.page = page;
            const resp = await this.sendGetRequest(`${this.config.apiHost}/${this.BASE_PATH}/audit/events`, server_client_1.Client.transformers.snakeCaseObjectKeys(params));
            const events = (resp.data?._embedded.events || []).map((event) => server_client_1.Client.transformers.camelCaseObjectKeys(event, true));
            totalPages = resp.data?.page?.totalPages || 0;
            yield* events;
            page++;
        } while (page <= totalPages);
    }
    async getEvent(eventId) {
        const resp = await this.sendGetRequest(`${this.config.apiHost}/${this.BASE_PATH}/audit/events/${eventId}`);
        return server_client_1.Client.transformers.camelCaseObjectKeys(resp.data, true);
    }
}
exports.Audit = Audit;
//# sourceMappingURL=audit.js.map